<?xml version="1.0"?>
<window type="window" id="14000">
    <defaultcontrol always="false">100</defaultcontrol>
    <allowoverlay>no</allowoverlay>
    <animation effect="fade" time="100">WindowOpen</animation>
    <animation effect="slide" end="0,576" time="100">WindowClose</animation>
    <onload lang="python">
<![CDATA[
import menu

mc.GetWindow(14000).GetList(100).SetFocusedItem(menu.lf_category)
mc.GetWindow(14000).GetList(110).SetFocusedItem(menu.lf_erun)
mc.GetWindow(14000).GetList(120).SetFocusedItem(menu.lf_video)

mc.GetPlayer().Stop()

if len(mc.GetWindow(14000).GetList(100).GetItems()) == 0:
    categories = menu.get_categories()
    if categories:
        mc.GetWindow(14000).GetList(100).SetItems(categories)
]]>
    </onload>
    <controls>
        <control type="group">
            <control type="image">
                <width>1280</width>
                <height>720</height>
                <texture>background.png</texture>
            </control>
            <control type="wraplist" id="100">
                <focusposition>2</focusposition>
                <posx>350</posx>
                <posy>25</posy>
                <width>1030</width>
                <height>150</height>
                <orientation>horizontal</orientation>
                <itemlayout width="175">
                    <control type="label">
                        <width>175</width>
                        <posy>25</posy>
                        <align>center</align>
                        <aligny>center</aligny>
                        <label>$INFO[ListItem.Label]</label>
                        <textcolor>white</textcolor>
                        <wrapmultiline>true</wrapmultiline>
                    </control>
                </itemlayout>
                <focusedlayout width="175">
                    <control type="label">
                        <width>175</width>
                        <posy>25</posy>
                        <align>center</align>
                        <aligny>center</aligny>
                        <label>$INFO[ListItem.Label]</label>
                        <textcolor>red</textcolor>
                        <wrapmultiline>true</wrapmultiline>
                    </control>
                </focusedlayout>
                <content type="action">
                    <onclick lang="python">
<![CDATA[
menu.lf_category = mc.GetWindow(14000).GetList(100).GetFocusedItem()

cat_id = mc.GetFocusedItem(14000, 100).GetProperty('id')
mc.ShowDialogWait()

if cat_id == '5':
    eruns = menu.get_eruns()
    mc.GetWindow(14000).GetList(110).SetItems(eruns)
    next_menu = 110
else:
    videos = menu.get_videos(cat_id)
    mc.GetWindow(14000).GetList(120).SetItems(videos)
    next_menu = 120

mc.HideDialogWait()
mc.GetWindow(14000).PushState()
mc.GetWindow(14000).GetControl(next_menu).SetVisible(True)
mc.GetWindow(14000).GetControl(next_menu).SetFocus()
]]>
                    </onclick>
                </content>
            </control>
            <control type="list" id="110">
                <visible>false</visible>
                <posy>100</posy>
                <posx>50</posx>
                <width>550</width>
                <height>600</height>
                <orientation>vertical</orientation>
                <itemlayout height="50">
                    <control type="label">
                        <font>font26</font>
                        <posx>0</posx>
                        <width>550</width>
                        <height>50</height>
                        <aligny>center</aligny>
                        <label>$INFO[ListItem.Label]</label>
                        <textcolor>white</textcolor>
                    </control>
                </itemlayout>
                <focusedlayout height="50">
                    <control type="label">
                        <font>font26</font>
                        <width>550</width>
                        <height>50</height>
                        <aligny>center</aligny>
                        <label>$INFO[ListItem.Label]</label>
                        <textcolor>red</textcolor>
                        <scroll>true</scroll>
                    </control>
                </focusedlayout>
                <content type="action">
                    <onclick lang="python">
<![CDATA[
menu.lf_erun = mc.GetWindow(14000).GetList(110).GetFocusedItem()

erun_id = mc.GetFocusedItem(14000, 110).GetProperty('id')
mc.ShowDialogWait()
videos = menu.get_videos(erun_id)
mc.GetWindow(14000).GetList(120).SetItems(videos)
mc.HideDialogWait()

mc.GetWindow(14000).PushState()
mc.GetWindow(14000).GetControl(110).SetVisible(False)
mc.GetWindow(14000).GetControl(120).SetVisible(True)
mc.GetWindow(14000).GetControl(120).SetFocus()
]]>
                    </onclick>
               </content>
            </control>
            <control type="list" id="120">
                <visible>false</visible>
                <posy>100</posy>
                <posx>50</posx>
                <width>550</width>
                <height>600</height>
                <orientation>vertical</orientation>
                <itemlayout height="50">
                    <control type="label">
                        <font>font26</font>
                        <posx>0</posx>
                        <width>550</width>
                        <height>50</height>
                        <aligny>center</aligny>
                        <label>$INFO[ListItem.Label]</label>
                        <textcolor>white</textcolor>
                    </control>
                </itemlayout>
                <focusedlayout height="50">
                    <control type="label">
                        <font>font26</font>
                        <width>550</width>
                        <height>50</height>
                        <aligny>center</aligny>
                        <label>$INFO[ListItem.Label]</label>
                        <textcolor>red</textcolor>
                        <scroll>true</scroll>
                    </control>
                </focusedlayout>
                <content type="action">
                    <onclick lang="python">
<![CDATA[
menu.lf_video = mc.GetWindow(14000).GetList(120).GetFocusedItem()

mc.GetPlayer().Play(mc.GetFocusedItem(14000, 120))
]]>
                    </onclick>
               </content>
            </control>
            <control type="label">
                <visible>Control.HasFocus(120)</visible>
                <font>sans30b</font>
                <posx>650</posx>
                <posy>100</posy>
                <width>600</width>
                <height>100</height>
                <align>left</align>
                <aligny>top</aligny>
                <label>$INFO[Container(120).ListItem.Label]</label>
                <background>blue</background>
                <textcolor>white</textcolor>
                <wrapmultiline>true</wrapmultiline>
            </control>
            <control type="label">
                <visible>Control.HasFocus(120)</visible>
                <posx>650</posx>
                <posy>175</posy>
                <width>600</width>
                <height>200</height>
                <align>left</align>
                <aligny>top</aligny>
                <label>$INFO[Container(120).ListItem.property(description)]</label>
                <background>blue</background>
                <textcolor>white</textcolor>
                <wrapmultiline>true</wrapmultiline>
            </control>
            <control type="label">
                <visible>Control.HasFocus(120)</visible>
                <posx>650</posx>
                <posy>250</posy>
                <width>600</width>
                <height>50</height>
                <align>left</align>
                <aligny>top</aligny>
                <label>$INFO[Container(120).ListItem.Date]</label>
                <background>blue</background>
                <textcolor>white</textcolor>
            </control>
            <control type="largeimage">
                <visible>Control.HasFocus(120)</visible>
                <posx>650</posx>
                <posy>325</posy>
                <width>600</width>
                <height>400</height>
                <aspectratio>keep</aspectratio>
                <bordersize>5</bordersize>
                <texture>$INFO[Container(120).ListItem.Thumb]</texture>
            </control>
        </control>
    </controls>
</window>